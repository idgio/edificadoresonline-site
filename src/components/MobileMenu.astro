---
const pathname = Astro.url.pathname;
const normalizedPathname =
  pathname !== "/" && pathname.endsWith("/") ? pathname.slice(0, -1) : pathname;
const isHome = normalizedPathname === "/";
const isDiscipulados = normalizedPathname.startsWith("/discipulados");
const isPredicas = normalizedPathname.startsWith("/predicas");
const linkClass = (isActive: boolean) =>
  `transition hover:text-[#111111]${isActive ? " text-[#111111]" : ""}`;
---

<!-- Mobile Menu -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-50 bg-[#f7f1e7] transform translate-x-full transition-transform duration-300 ease-in-out md:hidden"
>
  <div class="flex items-center justify-between p-6 border-b border-[#e1d7c7]">
    <a href="/">
      <img
        src="/images/edificadoresonline_logo.webp"
        alt="Edificadores Online Logo"
        class="h-10 w-auto"
      />
    </a>
    <button
      id="close-menu-button"
      class="rounded-full border border-[#d2c8b8] px-4 py-2 text-sm font-semibold text-[#3f3f3f] transition hover:border-[#111111]"
    >
      Cerrar
    </button>
  </div>
  <nav class="flex flex-col gap-6 p-6 text-lg font-semibold text-[#3f3f3f]">
    <a class={linkClass(isHome)} href="/">Inicio</a>
    <a class={linkClass(isDiscipulados)} href="/discipulados">Discipulados</a>
    <a class="transition hover:text-[#111111]" href="#">Diplomados</a>
    <a class={linkClass(isPredicas)} href="/predicas">Pr√©dicas</a>
  </nav>
</div>

<script>
  // Mobile menu functionality
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const closeMenuButton = document.getElementById("close-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");

  mobileMenuButton?.addEventListener("click", () => {
    mobileMenu?.classList.remove("translate-x-full");
    mobileMenu?.classList.add("translate-x-0");
  });

  closeMenuButton?.addEventListener("click", () => {
    mobileMenu?.classList.add("translate-x-full");
    mobileMenu?.classList.remove("translate-x-0");
  });

  // Close menu when clicking on a link
  const mobileMenuLinks = mobileMenu?.querySelectorAll("a");
  mobileMenuLinks?.forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("translate-x-full");
      mobileMenu?.classList.remove("translate-x-0");
    });
  });
</script>
